import tkinter as tk
from tkinter import messagebox
import random

# Fun√ß√£o para carregar palavras de um arquivo
def carregar_palavras(arquivo):
    with open(arquivo, "r") as f:
        palavras = f.readlines()
    return [p.strip().lower() for p in palavras]

# Fun√ß√£o para escolher uma palavra aleat√≥ria
def escolher_palavra():
    tema = tema_var.get()
    nivel = nivel_var.get()

    if tema == "Capitais":
        arquivo = f"capitais{nivel}.txt"
    elif tema == "Animais":
        arquivo = f"animais{nivel}.txt"
    elif tema == "Frutas":
        arquivo = f"frutas{nivel}.txt"
    else:
        messagebox.showwarning("Erro", "Escolha um tema v√°lido.")
        return

    global palavra_secreta, letras_usuario, chances
    palavra_secreta = random.choice(carregar_palavras(arquivo))
    letras_usuario = []
    chances = 7
    atualizar_display()

# Atualiza o texto exibido
def atualizar_display():
    exibicao = ""
    for letra in palavra_secreta:
        exibicao += letra if letra in letras_usuario else "_"
        exibicao += " "
    palavra_label.config(text=exibicao)
    chances_label.config(text=f"Chances restantes: {chances}")

# Verifica se o jogador acertou a letra
def tentar_letra():
    global chances
    letra = entrada_letra.get().lower()
    entrada_letra.delete(0, tk.END)

    if not letra.isalpha() or len(letra) != 1:
        messagebox.showinfo("Aviso", "Digite apenas uma letra!")
        return

    if letra in letras_usuario:
        messagebox.showinfo("Aviso", "Voc√™ j√° tentou essa letra.")
        return

    letras_usuario.append(letra)

    if letra not in palavra_secreta:
        chances -= 1

    atualizar_display()
    verificar_fim()

# Verifica se o jogador ganhou ou perdeu
def verificar_fim():
    if all(letra in letras_usuario for letra in palavra_secreta):
        messagebox.showinfo("Parab√©ns!", f"Voc√™ acertou! A palavra era '{palavra_secreta}'.")
    elif chances == 0:
        messagebox.showinfo("Fim de jogo", f"Voc√™ perdeu! A palavra era '{palavra_secreta}'.")

# ======= Interface gr√°fica =======
janela = tk.Tk()
janela.title("üéØ Jogo da Forca")
janela.geometry("400x400")
janela.config(bg="#e0f7fa")

# Sele√ß√£o de tema
tk.Label(janela, text="Escolha o tema:", bg="#e0f7fa", font=("Arial", 12, "bold")).pack()
tema_var = tk.StringVar(value="Capitais")
tk.OptionMenu(janela, tema_var, "Capitais", "Animais", "Frutas").pack(pady=5)

# Sele√ß√£o de n√≠vel
tk.Label(janela, text="Escolha o n√≠vel:", bg="#e0f7fa", font=("Arial", 12, "bold")).pack()
nivel_var = tk.StringVar(value="1")
tk.OptionMenu(janela, nivel_var, "1", "2", "3").pack(pady=5)

# Bot√£o de iniciar
tk.Button(janela, text="üéÆ Iniciar Jogo", command=escolher_palavra, bg="#00796b", fg="white", width=15).pack(pady=10)

# Exibi√ß√£o da palavra
palavra_label = tk.Label(janela, text="", font=("Consolas", 18, "bold"), bg="#e0f7fa")
palavra_label.pack(pady=20)

# Campo de tentativa
entrada_letra = tk.Entry(janela, font=("Arial", 14), width=5, justify="center")
entrada_letra.pack(pady=5)

# Bot√£o de tentar
tk.Button(janela, text="Tentar", command=tentar_letra, bg="#004d40", fg="white", width=10).pack(pady=10)

# Exibi√ß√£o de chances
chances_label = tk.Label(janela, text="Chances restantes: 7", bg="#e0f7fa", font=("Arial", 12))
chances_label.pack(pady=10)

janela.mainloop()
